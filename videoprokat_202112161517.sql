--
-- Script was generated by Devart dbForge Studio 2020 for MySQL, Version 9.0.689.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 16.12.2021 15:19:01
-- Server version: 8.0.27
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE videoprokat;

--
-- Drop table `director`
--
DROP TABLE IF EXISTS director;

--
-- Drop table `leading_actor`
--
DROP TABLE IF EXISTS leading_actor;

--
-- Drop table `barter`
--
DROP TABLE IF EXISTS barter;

--
-- Drop table `klients`
--
DROP TABLE IF EXISTS klients;

--
-- Drop table `disks`
--
DROP TABLE IF EXISTS disks;

--
-- Drop table `films`
--
DROP TABLE IF EXISTS films;

--
-- Drop table `film_janre`
--
DROP TABLE IF EXISTS film_janre;

--
-- Set default database
--
USE videoprokat;

--
-- Create table `film_janre`
--
CREATE TABLE film_janre (
  Code_janre int NOT NULL AUTO_INCREMENT,
  Janre tinytext DEFAULT NULL,
  PRIMARY KEY (Code_janre)
)
ENGINE = INNODB,
AUTO_INCREMENT = 14,
AVG_ROW_LENGTH = 2730,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `films`
--
CREATE TABLE films (
  film_kode int NOT NULL AUTO_INCREMENT,
  Name tinytext DEFAULT NULL,
  Leading_Actor_Code int DEFAULT NULL,
  Country tinytext DEFAULT NULL,
  Director_Code int DEFAULT NULL,
  Release_date int NOT NULL,
  Duration int DEFAULT NULL,
  Language tinytext DEFAULT NULL,
  Number_of_episodes int NOT NULL,
  Janre_code int DEFAULT NULL,
  PRIMARY KEY (film_kode)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE films
ADD CONSTRAINT FK_films_film_janre_Code_janre FOREIGN KEY (Janre_code)
REFERENCES film_janre (Code_janre);

--
-- Create table `disks`
--
CREATE TABLE disks (
  `№_of_disk` int NOT NULL AUTO_INCREMENT,
  film_code int DEFAULT NULL,
  Name tinytext DEFAULT NULL,
  Number_series int DEFAULT NULL,
  Receipt_date date DEFAULT NULL,
  Rental_price int DEFAULT NULL,
  type tinytext DEFAULT NULL,
  PRIMARY KEY (`№_of_disk`)
)
ENGINE = INNODB,
AUTO_INCREMENT = 12,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE disks
ADD CONSTRAINT FK_disks_films_film_kode FOREIGN KEY (film_code)
REFERENCES films (film_kode);

--
-- Create table `klients`
--
CREATE TABLE klients (
  `№klient` int NOT NULL AUTO_INCREMENT,
  Firstname tinytext DEFAULT NULL,
  Lname tinytext DEFAULT NULL,
  pasport_lot int DEFAULT NULL,
  passport_No int DEFAULT NULL,
  Adress tinytext DEFAULT NULL,
  PRIMARY KEY (`№klient`)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 2730,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `barter`
--
CREATE TABLE barter (
  `№ of klient` int NOT NULL,
  `№_of_disk` int DEFAULT NULL,
  Date_issue date DEFAULT NULL,
  Return_date date DEFAULT NULL,
  Mark_return tinytext DEFAULT NULL,
  `№_barter` int NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`№_barter`)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE barter
ADD CONSTRAINT `FK_barter_disks_№_of_disk` FOREIGN KEY (`№_of_disk`)
REFERENCES disks (`№_of_disk`);

--
-- Create foreign key
--
ALTER TABLE barter
ADD CONSTRAINT `FK_barter_klients_№ of klient` FOREIGN KEY (`№ of klient`)
REFERENCES klients (`№klient`);

--
-- Create table `leading_actor`
--
CREATE TABLE leading_actor (
  Leading_Actor_Code int NOT NULL AUTO_INCREMENT,
  film_kode int DEFAULT NULL,
  First_Name tinytext DEFAULT NULL,
  Last_Name tinytext DEFAULT NULL,
  PRIMARY KEY (Leading_Actor_Code)
)
ENGINE = INNODB,
AUTO_INCREMENT = 12,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE leading_actor
ADD CONSTRAINT FK_leading_actor_films_film_kode FOREIGN KEY (film_kode)
REFERENCES films (film_kode);

--
-- Create foreign key
--
ALTER TABLE films
ADD CONSTRAINT FK_films_leading_actor_Leading_Actor_Code FOREIGN KEY (Leading_Actor_Code)
REFERENCES leading_actor (Leading_Actor_Code);

--
-- Create table `director`
--
CREATE TABLE director (
  Director_Code int NOT NULL AUTO_INCREMENT,
  film_code int DEFAULT NULL,
  First_Name tinytext DEFAULT NULL,
  Last_Name tinytext DEFAULT NULL,
  PRIMARY KEY (Director_Code)
)
ENGINE = INNODB,
AUTO_INCREMENT = 12,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE director
ADD CONSTRAINT FK_director_films_film_kode FOREIGN KEY (film_code)
REFERENCES films (film_kode);

--
-- Create foreign key
--
ALTER TABLE films
ADD CONSTRAINT FK_films_director_Director_Code FOREIGN KEY (Director_Code)
REFERENCES director (Director_Code);

-- 
-- Dumping data for table film_janre
--
INSERT INTO film_janre VALUES
(1, 'Комедия'),
(2, 'Ужасы'),
(3, 'Драма'),
(4, 'Фантастика'),
(5, 'Фэнтези'),
(6, 'Документальное кино');

-- 
-- Dumping data for table films
--
INSERT INTO films VALUES
(2, 'Сияние', 1, 'США', 1, 1980, 146, 'Английский', 1, 2),
(3, 'Амели', 2, 'Франция', 2, 2001, 122, 'Французский', 1, 3),
(4, 'Ночь живых мертвецов', 3, 'США', 3, 1968, 96, 'Английский', 1, 2),
(5, 'Люди в черном', 4, 'США', 4, 1997, 98, 'Английский', 1, 4);

-- 
-- Dumping data for table klients
--
INSERT INTO klients VALUES
(1, 'Михаил Нератканов', 'Нератканов', 3123, 134555, 'Омутнинск'),
(2, 'Евгения Мармеладзе', 'Мармеладзе', 1414, 122334, 'Москва'),
(3, 'Валерий Пепелац', 'Пепелац', 4345, 145321, 'Омск'),
(5, 'Елена Головач', 'Головач', 3256, 123123, 'Томск'),
(10, 'Кирилл ', 'Бузмаков', 12334, 31344, 'Белореченск');

-- 
-- Dumping data for table disks
--
INSERT INTO disks VALUES
(1, 2, 'Сияние', 1, '2019-05-17', 4500, 'DVD'),
(2, 3, 'Амели', 1, '2021-09-29', 3000, 'CD'),
(3, 4, 'Ночь живых мертвецов (DVD)', 1, '2021-12-07', 6000, 'DVD'),
(4, 4, 'Ночь живых мертвецов (CD)', 1, '2021-12-06', 5500, 'CD'),
(5, 5, 'Люди в черном(DVD)', 1, '2021-10-28', 4200, 'DVD');

-- 
-- Dumping data for table leading_actor
--
INSERT INTO leading_actor VALUES
(1, 2, 'Джек', 'Николсон'),
(2, 3, 'Одри', 'Тоту'),
(3, 4, 'Дуэйн ', 'Джонс'),
(4, 5, 'Томми Ли', 'Джонс');

-- 
-- Dumping data for table director
--
INSERT INTO director VALUES
(1, 2, 'Стэнли Кубрик', 'Кубрик'),
(2, 3, 'Жан-Пьер Жёне', 'Жёне'),
(3, 4, 'Джордж Ромеро', 'Ромеро'),
(4, 5, 'Барри Зонненфельд', 'Зонненфельд');

-- 
-- Dumping data for table barter
--
INSERT INTO barter VALUES
(1, 1, '2021-12-16', '2021-12-31', '+', 1),
(2, 2, '2021-11-30', NULL, '-', 2),
(3, 3, '2021-12-06', '2021-12-07', '+', 3),
(3, 5, '2021-11-17', NULL, '-', 4);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;